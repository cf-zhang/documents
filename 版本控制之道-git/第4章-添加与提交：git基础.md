# 第四章 添加与提交： git基础

## 4.1 添加文件到暂存区

暂存区的变更：工作目录树中那些打算提交到版本库的变更，暂存操作将会更新git的内部索引，常把索引成为暂存区

通过暂存区，可以设置哪些变更要提交到版本库，哪些先不提交。 by git add

git add -i 开启交互模式

git add -p 直接进入补丁模式

## 4.2 提交修改

git不会单独记录和跟踪目录

git不支持自动更新版本库

这里说的提交并不是把修改发送到某个中央版本库中，而是提交到本地版本库。

git commit 提交使用-m参数写入剪短的留言。可以使用多个-m加入多段留言

如果不带-m参数，git commit命令将启动编辑器来编辑提交留言：

* 环境变量GIT_EDITOR的值

* git的设置core.editor的值

* 环境变量VISUAL的值

* 环境变量EDITOR的值

* 如果上诉值均为空，git会尝试启动vi编辑器

提交操作可是使用很多种不同的方法完成：

* 先git add  然后 git commit -m

* git commit -a 

> git会把工作目录树中当前所有的修改提交到版本库中，只会把已纳入git版本控制的文件添加到版本库中，而不会添加尚未被跟踪的文件。

git commit -m “change to some files” -a

* 指定要提交的文件或文件列表，把要提交的文件列在其他参数的后面

git commit -m “change to some file” some file


第一种方法是先暂存后提交，后两种方法是把修改直接提交


给git命令起别名：

> git config --global alias.ci "commit"

## 4.3 查看修改内容

使用git status和git diff 可以找出工作目录树中做了哪些修改，以及是如何修改的

### 查看当前状态

git status 输出：

> 暂存区内要提交的内容

> 工作目录树中未纳入暂存区的改动

> 尚未纳入git版本控制的新文件

### 查看文件改动

git diff ：比较的是工作目录树与暂存区之间的区别

git diff --cached : 比较暂存区与版本库中的区别

git diff HEAD ： 比较工作目录树（暂存和未暂存的修改）与版本库的差别

## 4.4 管理文件

> 移动文件，复制代码，忽略垃圾文件

### 文件重命名与移动

git mv <原文件名> <新文件名>

告诉git使用原文件的内容来创建新文件，新文件保留原文件的历史修改记录，并删除原文件

等效于：
 
 > 1、移动文件； 2、 git add ； 3、 git rm 旧文件
 
### 复制文件 --- 真的要复制它么

git不提供此命令，它不需要这样的复制命令。

### 忽略文件

.gitignore文件

把文件名加入到该文件中，这样git就不再管理这个文件

git支持通配符

还可以设置.git/info/exclude文件中的内容来进行忽略

### 确定设置忽略的方式

每个人都需要这类忽略，那么就使用.gitignore

如果只是本人需要的忽略，那么添加到.git/info/exclude

  



